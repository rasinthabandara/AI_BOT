const _0x3f3509 = _0x1a03; function _0xdf35() { const _0xae4ef5 = ['18kqrguW', '../../middlewares/user', 'log', 'replace', 'ACda9232647f04d5af64809d278f104b4c', '14qZhnYm', '/ask\x20', 'toLowerCase', 'body', 'stringify', '2010-04-01', 'whatsapp:+918430088300', 'left_limit', 'whatsapp:', 'SM855b6e78063008e799cc44972fd0c557', 'Hello\x20you\x20can\x20start\x20the\x20conversation\x20now\x20your\x20free\x20plan\x20has\x20been\x20updated.\x20/ask\x20hello', '/ask\x20is\x20not\x20there', 'Please\x20complete\x20the\x20task\x20first:-\x20TASK\x20or\x20upgrade\x20your\x20plans\x20to\x20avoide\x20ads:\x20', 'whatsapp:+14422005005', '91378nJxunG', 'exports', '3246220CHokSZ', '/ask\x20what\x20is\x20the\x20difference\x20between\x20me\x20and\x20you\x20?', 'msg\x20sent\x20to\x20the\x20existing\x20user\x20for\x20plan:\x20', '/hit', '../../function/promisesql', '3288483NlTBNQ', 'Router', '816550Xoqbce', 'plan\x20updated\x20for\x20existing\x20user', '/ask', '160yxwNkA', 'plan', 'WaId', '62931UuIeoW', '498224BLvyjs', 'received', '4281UZGgJm', 'trim', 'user\x20not\x20found\x20numer\x20is:\x20', '6USQgxf']; _0xdf35 = function () { return _0xae4ef5; }; return _0xdf35(); } function _0x1a03(_0x43a546, _0x14e0a2) { const _0xdf35ab = _0xdf35(); return _0x1a03 = function (_0x1a034a, _0x536aa2) { _0x1a034a = _0x1a034a - 0x1e2; let _0x55a54a = _0xdf35ab[_0x1a034a]; return _0x55a54a; }, _0x1a03(_0x43a546, _0x14e0a2); } (function (_0x1dd38b, _0xe69e30) { const _0x1ef082 = _0x1a03, _0x3cd262 = _0x1dd38b(); while (!![]) { try { const _0x585b54 = parseInt(_0x1ef082(0x1e2)) / 0x1 * (parseInt(_0x1ef082(0x1f7)) / 0x2) + parseInt(_0x1ef082(0x1f4)) / 0x3 * (parseInt(_0x1ef082(0x1ee)) / 0x4) + -parseInt(_0x1ef082(0x1eb)) / 0x5 * (-parseInt(_0x1ef082(0x1f8)) / 0x6) + parseInt(_0x1ef082(0x1fd)) / 0x7 * (parseInt(_0x1ef082(0x1f2)) / 0x8) + -parseInt(_0x1ef082(0x1e9)) / 0x9 + -parseInt(_0x1ef082(0x1e4)) / 0xa + parseInt(_0x1ef082(0x1f1)) / 0xb; if (_0x585b54 === _0xe69e30) break; else _0x3cd262['push'](_0x3cd262['shift']()); } catch (_0x3f0c46) { _0x3cd262['push'](_0x3cd262['shift']()); } } }(_0xdf35, 0x3fd24)); const router = require('express')[_0x3f3509(0x1ea)](), promisesql = require(_0x3f3509(0x1e8)), bcrypt = require('bcrypt'), { sign } = require('jsonwebtoken'), { isvalid } = require(_0x3f3509(0x1f9)), { sendText, openAi, getUser, getFreePlan, updatePlan, addUser, getPendingAd, checkIfPendingAd, descreaseLimit } = require('./function'); router['get'](_0x3f3509(0x1e7), async (_0x185a69, _0x4a47dd) => { const _0x1a1a47 = _0x3f3509; try { const _0x3b916a = { 'SmsMessageSid': 'SM855b6e78063008e799cc44972fd0c557', 'NumMedia': '0', 'ProfileName': 'codeyon.com', 'SmsSid': _0x1a1a47(0x206), 'WaId': '918430088300', 'SmsStatus': _0x1a1a47(0x1f3), 'body': _0x1a1a47(0x1e5), 'To': _0x1a1a47(0x20a), 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': _0x1a1a47(0x206), 'AccountSid': _0x1a1a47(0x1fc), 'From': _0x1a1a47(0x203), 'ApiVersion': _0x1a1a47(0x202) }; function _0x32e072(_0x376571) { const _0x97a308 = _0x1a1a47, _0x40ea96 = _0x97a308(0x1ed); return console[_0x97a308(0x1fa)]({ 'sentence': _0x376571 }), _0x376571[_0x97a308(0x1f5)]()[_0x97a308(0x1ff)]()['startsWith'](_0x40ea96); } console[_0x1a1a47(0x1fa)](_0x3b916a['body']), console['log']({ 'dataaaaa': _0x3b916a['body'] }); if (_0x32e072(_0x3b916a['body'] || '') || _0x32e072(_0x3b916a['Body'] || '')) { const _0x451de4 = await getUser(_0x3b916a[_0x1a1a47(0x1f0)]); _0x3b916a[_0x1a1a47(0x200)] = _0x3b916a[_0x1a1a47(0x200)][_0x1a1a47(0x1fb)](_0x1a1a47(0x1fe), ''); if (!_0x451de4) { await addUser(_0x3b916a[_0x1a1a47(0x1f0)]), console[_0x1a1a47(0x1fa)](_0x1a1a47(0x1f6) + _0x3b916a[_0x1a1a47(0x1f0)]); const _0x543615 = await getFreePlan(); console[_0x1a1a47(0x1fa)]({ 'freePlan': _0x543615 }), !_0x543615 ? (await sendText('Plan\x20not\x20found\x20buy\x20a\x20plan', _0x1a1a47(0x20a), _0x1a1a47(0x205) + _0x3b916a[_0x1a1a47(0x1f0)]), console[_0x1a1a47(0x1fa)]('msg\x20sent\x20to\x20the\x20user\x20for\x20plan:\x20' + _0x3b916a['WaId'])) : (await updatePlan(_0x3b916a[_0x1a1a47(0x1f0)], _0x543615), console[_0x1a1a47(0x1fa)](_0x3b916a), await sendText('Hello\x20you\x20can\x20start\x20the\x20conversation\x20now.\x20/ask\x20hello', _0x1a1a47(0x20a), 'whatsapp:' + _0x3b916a['WaId'])); } else { if (parseInt(_0x451de4[_0x1a1a47(0x204)]) < 0x1) { const _0x14927a = await getFreePlan(); !_0x14927a ? (await sendText('Plan\x20not\x20found\x20buy\x20a\x20plan.\x20you\x20are\x20an\x20existing\x20user', _0x1a1a47(0x20a), _0x1a1a47(0x205) + _0x3b916a['WaId']), console[_0x1a1a47(0x1fa)](_0x1a1a47(0x1e6) + _0x3b916a[_0x1a1a47(0x1f0)])) : (await updatePlan(_0x3b916a[_0x1a1a47(0x1f0)], _0x14927a), console[_0x1a1a47(0x1fa)](_0x1a1a47(0x1ec)), await sendText(_0x1a1a47(0x207), 'whatsapp:+14422005005', _0x1a1a47(0x205) + _0x3b916a[_0x1a1a47(0x1f0)])); } else { const _0x125cfb = JSON['parse'](_0x451de4[_0x1a1a47(0x1ef)])['ad'] === 0x1 ? !![] : ![]; if (_0x125cfb) { const _0x949f5 = await checkIfPendingAd(_0x3b916a[_0x1a1a47(0x1f0)]); if (_0x949f5) { await sendText(_0x1a1a47(0x209) + JSON[_0x1a1a47(0x201)](_0x949f5), 'whatsapp:+14422005005', _0x1a1a47(0x205) + _0x3b916a[_0x1a1a47(0x1f0)]), descreaseLimit(_0x3b916a['WaId']), console[_0x1a1a47(0x1fa)]('submit\x20ad\x20first\x20free\x20user'); return; } else { await getPendingAd(_0x3b916a[_0x1a1a47(0x1f0)]); const _0x499cd8 = await openAi(_0x3b916a['body']); await sendText(_0x499cd8, 'whatsapp:+14422005005', _0x1a1a47(0x205) + _0x3b916a[_0x1a1a47(0x1f0)]), await descreaseLimit(_0x3b916a[_0x1a1a47(0x1f0)]), console[_0x1a1a47(0x1fa)]('free\x20user\x20msg\x20sent'); } } else { await getPendingAd(_0x3b916a['WaId']); const _0x5a69d5 = await openAi(_0x3b916a['body']); await sendText(_0x5a69d5, _0x1a1a47(0x20a), _0x1a1a47(0x205) + _0x3b916a[_0x1a1a47(0x1f0)]), await descreaseLimit(_0x3b916a[_0x1a1a47(0x1f0)]), console[_0x1a1a47(0x1fa)]('premium\x20user\x20msg\x20sent'); } } } } else console[_0x1a1a47(0x1fa)](_0x1a1a47(0x208)); } catch (_0x2ca686) { console[_0x1a1a47(0x1fa)](_0x2ca686); } }), module[_0x3f3509(0x1e3)] = router;